# タスク一覧

- ファームウェア（Arduino）
  - [x] 仮想水コントローラを作る
  - [x] フォーマット通りにシリアル出力する
  - [x] （ハードウェア）ボタンモジュール、joystick モジュールの入力を取得してシリアル出力する
  - [x] （ソフトウェア）ボタンモジュール、joystick モジュールの入力を取得してシリアル出力する
- サーバ（Rust）
  - ライブラリ
    - [serialport/serialport-rs](https://github.com/serialport/serialport-rs) 4.8.2
  - [x] シリアル通信
    - [x] シリアルを受信する
    - [x] 受信したシリアルをパースして構造体
      - コントローラの入力 `SerialInput`([@water-controller-relay/src/serial/input.rs](water-controller-relay/src/serial/input.rs))
        - ボタンの押下状態: `ButtonInput`
        - 方向キー上下左右それぞれ 3 段階の値: `ControllerInput`
    - [x] ひとまず構造体を標準出力してコントローラの入力値を確認できる
  - [ ] WebSocket サーバの作成
    - [ ] WebSocket サーバの起動
    - [ ] 構造体を WebSocket で JSON 形式で配信する
      - 仕様メモ
        - 水コントローラから常にシリアルを読み取って送信し続ける。ボタンの押下やコントローラの状態に関わらず、操作をしなくても常に送信し続ける。
        - Rust 上は snake_case だが、JavaScript 上は camelCase に変換する。
      - メッセージ一覧
        - [ ] ボタンの押下状態: メッセージ名 `button-input`、ペイロード `{ isPushed: boolean }`
        - [ ] 方向キー上下左右それぞれ 3 段階の値: メッセージ名 `controller-input`、ペイロード `{ left: ControllerValue, right: ControllerValue, up: ControllerValue, down: ControllerValue }`
          - ControllerValue: `Noinput(i32) | Low(i32) | High(i32)`
            - Noinput: 0
            - Low: 1
            - High: 2
- デスクトップアプリ（Electron）
  - [ ] データ処理
    - [ ] WebSocket サーバへ接続する（再接続、切断、エラーハンドリング含め）
    - [ ] WebSocket サーバから JSON 形式のデータを受信する
    - [ ] 受信した JSON 形式のデータをパースして構造体に変換
  - [ ] UI の実装
    - [ ] 必要な UI 一覧
      - [ ] 設定画面
      - [ ] 方向キーデバッグ画面
        - [ ] 方向キーを描画
      - [ ] コンテンツ画面
        - [ ] p5.js でコンテンツを 3 つ用意する
        - [ ] ボタンモジュールを押したら方向キーを押したらコンテンツを切り替える
