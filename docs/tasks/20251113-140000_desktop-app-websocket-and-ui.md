# タスク概要

デスクトップアプリ（Electron）の WebSocket クライアント実装と UI 開発

## ステータス

- 最終更新日時：2025-11-13 14:00:00
- 作成日時：2025-11-13 14:00:00
- ステータス：未着手

## 目的

- WebSocket サーバから水コントローラの入力データをリアルタイムで受信する
- 受信したデータに基づいて、ユーザーに対してインタラクティブな UI を提供する
- デバッグ機能と本番コンテンツの両方を実装する

## ゴール

- [ ] WebSocket クライアントが安定して動作し、サーバからのデータを確実に受信できる
- [ ] 設定画面、デバッグ画面、コンテンツ画面の 3 つの画面が実装されている
- [ ] ボタンと方向キーの入力によってコンテンツの切り替えができる
- [ ] p5.js で実装した 3 つのコンテンツが水コントローラの入力に反応する

## タスク一覧

### データ処理

- [ ] WebSocket クライアントの実装
  - [ ] WebSocket サーバへの接続機能
  - [ ] 再接続機能の実装
  - [ ] 切断処理の実装
  - [ ] エラーハンドリングの実装
- [ ] データ受信と変換
  - [ ] WebSocket サーバから JSON 形式のデータを受信する
  - [ ] 受信した JSON データをパースして TypeScript の型に変換する
  - [ ] `button-input` メッセージの処理
  - [ ] `controller-input` メッセージの処理

### UI の実装

- [ ] 設定画面
  - [ ] WebSocket サーバの接続先設定
  - [ ] 接続状態の表示
  - [ ] デバッグモードの切り替え
- [ ] 方向キーデバッグ画面
  - [ ] 方向キー（上下左右）の視覚的な描画
  - [ ] リアルタイムでの入力値表示（Noinput/Low/High）
  - [ ] ボタンの押下状態表示
- [ ] コンテンツ画面
  - [ ] p5.js のセットアップ
  - [ ] コンテンツ 1: 水コントローラに反応するビジュアル
  - [ ] コンテンツ 2: 水コントローラに反応するビジュアル
  - [ ] コンテンツ 3: 水コントローラに反応するビジュアル
  - [ ] ボタンモジュールまたは方向キーでコンテンツを切り替える機能
  - [ ] 現在のコンテンツ番号の表示

## 参考資料

- [シリアル通信と WebSocket サーバの実装タスク](./20251109233530_serial-communication-and-websocket-server.md)
- プロジェクトルートの `spec.md` - 通信仕様
- `water-controller-app/` - Electron アプリのコードベース
  - `src/renderer/` - UI ロジック
  - `src/main/` - メインプロセス
  - `src/preload/` - ブリッジ
